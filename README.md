# ミライセレクト (Mirai Select)

アプリ URL: https://mirai-select.net/  
※ レスポンシブ未対応

## サービス概要

ミライセレクトは、ユーザーの悩みごとに対して異なる視点から選択肢を提示することで決断をサポートします。  
アプリ上で設定したキャラクターの性格をもとに AI が選択肢を生成し、ユーザーがどちらかを選択し、会話の履歴を残します。  
ユーザーは任意に履歴を他ユーザーに公開することができ、他のユーザーの悩みを知ることで共感や新たな知識を得ることもできます。

[![Image from Gyazo](https://i.gyazo.com/9b2acea44c53c2c1869b4827c0e445ac.png)](https://gyazo.com/9b2acea44c53c2c1869b4827c0e445ac)

## サービスを作成した背景

日常的に ChatGPT を使って調べ物をする上で、数多くの選択肢を提示されて結局どれにするか悩んだ経験はありませんか？私はプログラミング言語の選定やどの職種に転職するかということを相談する中で、3〜5 個ほど選択肢を提示され、毎回比較検証することが大変だった経験があります。

そこで、あらかじめ返答を 2 つに絞ってしまえば少なくとも比較検証するのはその 2 つで済みます。しかし、ここまでであればシンプルに ChatGPT に「特に有力なものを 2 つまでに絞って出力してください」と聞いても良いと思いました。

ですので、ちょっとした楽しみとして「キャラクターからの返答」という点と、「ユーザー同士のコミュニティ」という点で差別化を図りました。

キャラクターからの返答には漫画でよく見かける表現として「脳内で天使と悪魔が言い争いをする」場面を思い浮かべ、2 人のキャラクターに別の角度から意見を提示してもらうことで楽しみながらも多角的に選択肢を提示するようなサービスにしました。

## 主要機能

### 決断ヘルパー機能

[![Image from Gyazo](https://i.gyazo.com/d314830b455739dfc44c2a0856b63c00.png)](https://gyazo.com/d314830b455739dfc44c2a0856b63c00)

メインとなる機能です。  
キャラクターへの相談、タグの入力、公開設定を行うことができます。

### みんなの悩みごと

[![Image from Gyazo](https://i.gyazo.com/28e23676971af40d0d701ad80198dcd7.png)](https://gyazo.com/28e23676971af40d0d701ad80198dcd7)

ユーザーが公開設定を行った相談事を見ることができます。
コメント・ブックマークも行うことができます。

### マイページ

[![Image from Gyazo](https://i.gyazo.com/3aeef8faa8628b9b93f5f2ad9d796b5c.png)](https://gyazo.com/3aeef8faa8628b9b93f5f2ad9d796b5c)

キャラクターの作成・選択・自分の投稿の確認・ブックマークした投稿を確認することができます。

## 使用技術

| カテゴリ       | 技術                | 選定理由                                                                                  |
| -------------- | ------------------- | ----------------------------------------------------------------------------------------- |
| フロントエンド | TypeScript 5.2.2    |                                                                                           |
| フロントエンド | React 18.2.0        | UX を損なわないよう SPA にするため                                                        |
| フロントエンド | Next.js 14.0.1      | 認証面で NextAuth を使用したかったため/AppRouter が直感的にルーティングできると考えたため |
| CSS            | Tailwind 3.3.5      | カリキュラム中に使用した BootStrap に比べできることが多いと感じたため                     |
| バックエンド   | Ruby 3.2.2          |                                                                                           |
| バックエンド   | Ruby on Rails 7.0.8 | カリキュラムで習い、ミニアプリの作成や Rails チュートリアルを行ったりと慣れていたため     |
| データベース   | PostgreSQL          | Paas に Render を使用する予定で DB も Render が提供するものを使用する予定だったため       |
| 認証           | NextAuth.js         | コーディングのしやすさと Google との連携のしやすさ                                        |
| 環境構築       | Docker              |                                                                                           |
| 環境構築       | Docker Compose      |                                                                                           |
| インフラ       | Vercel              |                                                                                           |
| インフラ       | Render              | Rails チュートリアルやミニアプリで使用して慣れていたため                                  |
| API            | Google API          | 認証                                                                                      |
| API            | OpenAI API          | メイン機能                                                                                |
| その他         | Prettier, ESLint    |                                                                                           |

## 工夫した点

### UI/UX

OpenAI API のレスポンスは少し重くなりがちなのでそれ以外の点で動線をシンプルにして UX を損なわないように工夫しました。
特にアイコンやモーダルを多用し、メインの画面を出来るだけ大きく取るように工夫しました。
必要な情報はサイドバーなどで表示し、格納できるようにもしています。

[![Image from Gyazo](https://i.gyazo.com/8fbaab1576db167761dd0e03f45c73c0.png)](https://gyazo.com/8fbaab1576db167761dd0e03f45c73c0)

[![Image from Gyazo](https://i.gyazo.com/ec7aed332a84b60e44c662266e1f917a.png)](https://gyazo.com/ec7aed332a84b60e44c662266e1f917a)

サイドバーを格納できることでメイン機能の視認性が上がります。

### コードの再利用性

React はコンポーネント指向であるため、元々コードの再利用性が高いです。それに加えて API を叩く処理や型定義などをどこからでもインポートしやすい形にまとめることで再利用性を高めています。

### マスタデータの管理

Seed ファイルをこまめに分割し、開発環境・本番環境で自動的に使い分けられるように設定しているため、マスタデータの導入がスムーズです。

### コスト管理

OpenAI API はトークンを購入してその範囲で使用する形式であるため、システムメッセージやその他の部分でコストを抑える必要があります。そのため、インフラにコストがほぼかからない Render を使用したり、キャラクターの性格に MBTI タイプを使用することでシステムメッセージを短縮しつつ出来る限り正確な答えが反映されるようにするなどコスト管理意識を高めた実装をしています。

## 今後の開発

- テストの実装  
  締切駆動で開発していたため Lint 以外のテストをブラウザ上でのチェックしか行えていません。フロント、バックのテストは優先的に記述すべきと考えています。
- リファクタリング  
  キャッチアップが不十分な状態でコードを書き始めたため、開発初期のコードと本リリース直前のコードでクオリティにばらつきがあります。可読性やメンテナンス性が低いためリファクタリングが必要と考えています。
- 各機能の検討  
  他ユーザーが作成したキャラクターを使用できるようにするか、公開設定を後から行えるようにするか等検討すべき内容が残っているので検討する時間を取りたいと思っています。
- UI のブラッシュアップ
  ローディングがシンプルすぎるので変更したいのと、背景が単色というのが見づらい可能性があるのでさまざまな色に置き換えて検討したいです。また、レスポンシブにも対応したいです。
